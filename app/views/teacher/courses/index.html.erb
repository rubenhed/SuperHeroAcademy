
<div class="container my-3">

  <div class="d-flex align-items-center">
    <h1 class="text-decoration-underline me-auto">My courses</h1>
    <%= link_to "Open a new Course", new_course_path, class: "btn btn-primary "%>
  </div>

  <div class="row mt-2">
    <% if @user %>
      <% @user.courses.each do |course| %>
        <div class="col-4 mb-3">
          <div class="card">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz2TaeZnV3ZJBe7PIQfgi8AeLz80CtGbprvw&s" width="100px" class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title"><%= course.title %></h5>
              <p class="card-text"><%= course.description %></p>
              <div class="d-flex">
                <a href=<%= course_path(course) %> class="btn btn-primary me-auto">View Course</a>
                <%= link_to "Delete", course_path(course), class: "btn btn-warning", data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this course?" } %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
  </div>
  <h1 class="text-decoration-underline">Sign ups</h1>
  <% @user.courses.each do |course| %>
    <% course.bookings.each do |booking| %>
      <% if booking.present? && booking.status == "pending" %>
      <div class="border d-flex">
        <p class="me-auto">Booker: <%= booking.user.name %>. Status: <%= booking.status %>.</p>
        <%= button_to "Accept", booking_path(booking, status: :accepted), class: "btn btn-primary", method: :patch %>
        <%= button_to "Reject", booking_path(booking, status: :rejected), class: "btn btn-primary", method: :patch %>
      </div>
      <% end %>
    <% end %>
  <% end %>


    <% end %>


</div>
